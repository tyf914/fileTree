{"version":3,"sources":["../src/index.js"],"names":["fd","file","num","str","parentFile","dirFiles","i","stats","fs","statSync","err","console","log","isDirectory","writeFileSync","split","slice","toString","flag","files","readdirSync","preCalc","isFile","require","readdir","process","cwd","open"],"mappings":"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","file":"index.js","sourcesContent":["/**\r\n * Created by yifei.tang on 2017/10/01.\r\n */\r\n'use strict'\r\n\r\nvar fs = require('fs');\r\n\r\n//fd为fs.open的返回值，file为目录下历次遍历的文件/目录，num为缩进次数计数器\r\nasync function preCalc(fd, file, num) {\r\n    let str = '';\r\n\r\n    //存入当前传入的目录名\r\n    let parentFile = file;\r\n    num++;\r\n\r\n    let dirFiles = [];\r\n\r\n    //计算当前空格数量\r\n    for (let i = 0; i < num * 3; i++) {\r\n        str += ' ';\r\n    }\r\n\r\n    //判断file是文件还是目录\r\n    let stats = fs.statSync(file, function (err) {\r\n        if (err) {\r\n            console.log(err);\r\n            return;\r\n        }\r\n    });\r\n\r\n\r\n    if (stats.isDirectory()) {\r\n\r\n        fs.writeFileSync(fd, `${str}+---${file.split('/').slice(-1).toString()}\\n`, {flag: 'a'}, function (err) {\r\n            if (err) {\r\n                console.log(err);\r\n                return;\r\n            }\r\n        });\r\n        let files = fs.readdirSync(file, function (err) {\r\n            if (err) {\r\n                console.log(err);\r\n                return;\r\n            }\r\n        });\r\n\r\n        for (let file of files) {\r\n            await preCalc(fd, `${parentFile}\\/${file}`, num);\r\n        }\r\n\r\n    } else if (stats.isFile()) {\r\n        fs.writeFileSync(fd, `${str}|---${file.split('/').slice(-1).toString()}\\n`, {flag: 'a'}, function (err) {\r\n            if (err) {\r\n                console.log(err);\r\n                return;\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n\r\nfs.readdir(process.cwd(), function (err, files) {\r\n    if (err) {\r\n        console.log(err);\r\n        return;\r\n    }\r\n\r\n    fs.open('output.txt', 'w', function (err, fd) {\r\n        if (err) {\r\n            console.log(err);\r\n            return;\r\n        }\r\n\r\n        //追加模式写入文件名\r\n        fs.writeFileSync(fd, `   ${process.cwd()}\\n   |\\n`, {flag: 'a'}, function (err) {\r\n            if (err) {\r\n                console.log(err);\r\n                return;\r\n            }\r\n        });\r\n\r\n        for (let file in files) {\r\n            preCalc(fd, files[file], 0);\r\n        }\r\n    })\r\n\r\n});"]}